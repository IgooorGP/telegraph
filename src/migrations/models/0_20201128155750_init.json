{
  "upgrade": [
    "CREATE TABLE IF NOT EXISTS \"chatroom\" (\n    \"id\" UUID NOT NULL  PRIMARY KEY,\n    \"created_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"name\" VARCHAR(255) NOT NULL,\n    \"description\" VARCHAR(255) NOT NULL,\n    \"max_concurrent_users\" INT NOT NULL,\n    \"is_active\" BOOL NOT NULL  DEFAULT True\n);\nCREATE INDEX IF NOT EXISTS \"idx_chatroom_created_d59897\" ON \"chatroom\" (\"created_at\");\nCREATE INDEX IF NOT EXISTS \"idx_chatroom_updated_1d41e3\" ON \"chatroom\" (\"updated_at\");\nCREATE INDEX IF NOT EXISTS \"idx_chatroom_name_f56787\" ON \"chatroom\" (\"name\");\nCREATE INDEX IF NOT EXISTS \"idx_chatroom_name_57c5fa\" ON \"chatroom\" (\"name\", \"is_active\");\nCOMMENT ON TABLE \"chatroom\" IS 'Models a chatroom.';\nCREATE TABLE IF NOT EXISTS \"user\" (\n    \"id\" UUID NOT NULL  PRIMARY KEY,\n    \"created_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"nick_name\" VARCHAR(255) NOT NULL UNIQUE\n);\nCREATE INDEX IF NOT EXISTS \"idx_user_created_b19d59\" ON \"user\" (\"created_at\");\nCREATE INDEX IF NOT EXISTS \"idx_user_updated_dfdb43\" ON \"user\" (\"updated_at\");\nCOMMENT ON TABLE \"user\" IS 'Models a chat user.';\nCREATE TABLE IF NOT EXISTS \"message\" (\n    \"id\" UUID NOT NULL  PRIMARY KEY,\n    \"created_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"updated_at\" TIMESTAMPTZ   DEFAULT CURRENT_TIMESTAMP,\n    \"message\" VARCHAR(255) NOT NULL,\n    \"user_id\" UUID NOT NULL REFERENCES \"user\" (\"id\") ON DELETE CASCADE,\n    \"chat_room_id\" UUID NOT NULL REFERENCES \"chatroom\" (\"id\") ON DELETE CASCADE\n);\nCREATE INDEX IF NOT EXISTS \"idx_message_created_e537a8\" ON \"message\" (\"created_at\");\nCREATE INDEX IF NOT EXISTS \"idx_message_updated_db912a\" ON \"message\" (\"updated_at\");\nCOMMENT ON TABLE \"message\" IS 'Models a chat message coming from a user in a chatroom.';\nCREATE TABLE IF NOT EXISTS \"aerich\" (\n    \"id\" SERIAL NOT NULL PRIMARY KEY,\n    \"version\" VARCHAR(255) NOT NULL,\n    \"app\" VARCHAR(20) NOT NULL,\n    \"content\" TEXT NOT NULL\n);"
  ]
}